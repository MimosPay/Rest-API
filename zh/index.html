
<!doctype html>
<html>
  <head>
    <link href="../images/favicon-956519c8.ico" rel="icon" type="image/ico" />
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>MimosPay 接口文档</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="../stylesheets/screen-73d6e62f.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all-e9bde216.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="zh zh_index" data-languages="[&quot;shell&quot;,&quot;javascript--node&quot;,&quot;go&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="../images/logo-32645a2a.svg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="javascript--node">NodeJS</a>
              <a href="#" data-language-name="go">Go</a>
              <a href="#" data-language-name="python">Python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#intro" class="toc-h1 toc-link" data-title="介绍">介绍</a>
          </li>
          <li>
            <a href="#guides" class="toc-h1 toc-link" data-title="接入指南">接入指南</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#accept-payments-via-mimospay" class="toc-h2 toc-link" data-title="MimosPay作为支付方式">MimosPay作为支付方式</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#charges" class="toc-h1 toc-link" data-title="充值（收款）">充值（收款）</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-a-charge" class="toc-h2 toc-link" data-title="创建充值（收款）订单">创建充值（收款）订单</a>
                  </li>
                  <li>
                    <a href="#update-a-charge" class="toc-h2 toc-link" data-title="更新充值（收款）订单">更新充值（收款）订单</a>
                  </li>
                  <li>
                    <a href="#show-a-charge" class="toc-h2 toc-link" data-title="查询充值（收款）订单">查询充值（收款）订单</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
          </li>
          <li>
            <a href="#schema-resources" class="toc-h1 toc-link" data-title="资源定义">资源定义</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#schema-apiresponse" class="toc-h2 toc-link" data-title="ApiResponse">ApiResponse</a>
                  </li>
                  <li>
                    <a href="#schema-charge-order" class="toc-h2 toc-link" data-title="Charge">Charge</a>
                  </li>
                  <li>
                    <a href="#schema-block-tx" class="toc-h2 toc-link" data-title="Block Tx Information">Block Tx Information</a>
                  </li>
                  <li>
                    <a href="#schema-event" class="toc-h2 toc-link" data-title="Event">Event</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#currencies" class="toc-h1 toc-link" data-title="支持的货币">支持的货币</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#fiat-currencies" class="toc-h2 toc-link" data-title="法定货币">法定货币</a>
                  </li>
                  <li>
                    <a href="#crypto-currencies" class="toc-h2 toc-link" data-title="加密货币">加密货币</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="异常错误">异常错误</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://w.mimos.io/commerce'>Sign Up to get API credentials</a></li>
            <li><a href='https://github.com/MimosPay/Rest-API'>Documentation Powered by Slate</a></li>
        </ul>
      <!-- change language -->
      <ul class="toc-footer">
        <li><a href="../">Switch to English</a></li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='intro'>介绍</h1>
<p>Mimos Commerce提供了一个简单而强大的REST API，可将加密货币付款集成到您的业务或应用程序中。 该API参考文档提供了有关可用服务的可访问点以及如何与它们交互的信息。</p>

<ul>
<li><a href="https://w.mimos.io/commerce/legal/terms-of-service">Terms of service</a></li>
<li><a href="https://mimos.io/">License - Commercial Use License</a></li>
</ul>

<p>API入口: <code>https://api.mimos.io/crypto-checkout/</code></p>
<h1 id='guides'>接入指南</h1><h2 id='accept-payments-via-mimospay'>MimosPay作为支付方式</h2>
<p>通过MimosPay接受付款，需要在API请求带上Token。并且在请求发送之前需要进行密码签名。</p>
<h3 id='getting-api-key'>获取API Key</h3>
<p>在<code>设置 -> API Keys</code>页面中创建生成API Key。</p>

<ol>
<li>点击<code>添加API Key</code></li>
<li>填写表单内容

<ul>
<li>标签, 比如： e电商平台</li>
<li>支付成功跳转地址</li>
<li>支付失败跳转地址</li>
<li>Webhook地址，用于接收MimosPay推送事件的</li>
</ul></li>
<li>继续点击按钮<code>生成API KEY</code></li>
<li>点击<code>复制API KEY</code>或者手动复制以保存创建生成的新API Key和API Secret</li>
</ol>

<p><strong>提示</strong>:</p>

<ul>
<li><code>API Key (APP_ID)</code> 用于API请求</li>
<li><code>API Secrect</code> 用于对API请求进行签名，创建后仅可见一次</li>
</ul>
<h3 id='signing-request'>对请求签名</h3>
<blockquote>
<p>Request Headers Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="s2">"X-MM-APP-ID"</span><span class="err">:</span><span class="w"> </span><span class="s2">"6e1dd7ce21874898b0b77b3288f006fa"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"X-MM-TIMESTAMP"</span><span class="err">:</span><span class="w"> </span><span class="mi">1594127461389</span><span class="p">,</span><span class="w">
  </span><span class="s2">"X-MM-NONCE"</span><span class="err">:</span><span class="w"> </span><span class="s2">"2hjkr7iveci"</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Request Body Example</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="s2">"3qqx2a6vd96x67c91cplq"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"599"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="s2">"{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Assume the API key is '6e1dd7ce21874898b0b77b3288f006fa'</span>
A <span class="o">=</span> <span class="s1">'X-MM-APP-ID=6e1dd7ce21874898b0b77b3288f006fa&amp;external_order_id=3qqx2a6vd96x67c91cplq&amp;name=iphone 11&amp;price=599&amp;currency=USD&amp;metadata={"image_url":"https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg","customer_id":"123456","customer_name":"my-user-name"}&amp;X-MM-TIMESTAMP=1594647652397&amp;X-MM-NONCE=2hjkr7iveci'</span>

<span class="nv">stringA</span><span class="o">=</span> <span class="s1">'X-MM-APP-ID=6e1dd7ce21874898b0b77b3288f006fa&amp;X-MM-NONCE=2hjkr7iveci&amp;X-MM-TIMESTAMP=1594647652397&amp;currency=USD&amp;external_order_id=3qqx2a6vd96x67c91cplq&amp;metadata={"image_url":"https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg","customer_id":"123456","customer_name":"my-user-name"}&amp;name=iphone 11&amp;price=599'</span>

<span class="c"># Assume the API Secret is '1bbbwkGuHBZhnVatOrglZyeiBzuOvYvKgNvzZCWlQHqh6m0uHWpE5h95H62BSnymJL'</span>
<span class="nv">stringB</span><span class="o">=</span> stringA + <span class="s1">'&amp;key=1bbbwkGuHBZhnVatOrglZyeiBzuOvYvKgNvzZCWlQHqh6m0uHWpE5h95H62BSnymJL'</span>

<span class="c"># MD5, '416D616F6F796778DAC3EEF2F179739D'</span>
signatureVal <span class="o">=</span> MD5<span class="o">(</span>stringB<span class="o">)</span>.toUpperCase<span class="o">()</span>

<span class="c"># HmacSHA256, '6BCABDD525CAE130F52D614C4F7B26727C6EDFD28777A2A76B717002E7136721'</span>
signatureVal <span class="o">=</span> HmacSHA256<span class="o">(</span>stringB, secrect<span class="o">)</span>.toUpperCase<span class="o">()</span>
</code></pre></div>
<blockquote>
<p>Request samples</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl <span class="nt">-X</span> POST https://api.mimos.io/crypto-checkout/v1/charges <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'X-MM-APP-ID: 6e1dd7ce21874898b0b77b3288f006fa'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'X-MM-TIMESTAMP: 1594127461389'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'X-MM-SIGNATURE: 416D616F6F796778DAC3EEF2F179739D'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'X-MM-NONCE: 2hjkr7iveci'</span>
  <span class="nt">--data-binary</span> <span class="s1">'{"external_order_id":"3qqx2a6vd96x67c91cplq","name":"iphone 11","price":"599","currency":"USD","metadata":"{\"image_url\":\"https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg\",\"customer_id\":\"123456\",\"customer_name\":\"my-user-name\"}"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">fetch</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">node-fetch</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">metadata</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">599</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">iphone 11</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">external_order_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">3qqx2a6vd96x67c91cplq</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USD</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">X-MM-APP-ID</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">6e1dd7ce21874898b0b77b3288f006fa</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">X-MM-TIMESTAMP</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">1594127461389</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">X-MM-SIGNATURE</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">416D616F6F796778DAC3EEF2F179739D</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">X-MM-NONCE</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">2hjkr7iveci</span><span class="dl">'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.mimos.io/crypto-checkout/v1/charges</span><span class="dl">'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">inputBody</span><span class="p">),</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
       <span class="s">"bytes"</span>
       <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="n">headers</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span>
        <span class="s">"Content-Type"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span>
        <span class="s">"Accept"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span>
        <span class="s">"X-MM-APP-ID"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"6e1dd7ce21874898b0b77b3288f006fa"</span><span class="p">},</span>
        <span class="s">"X-MM-TIMESTAMP"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"1594127461389"</span><span class="p">},</span>
        <span class="s">"X-MM-SIGNATURE"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"416D616F6F796778DAC3EEF2F179739D"</span><span class="p">},</span>
        <span class="s">"X-MM-NONCE"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"2hjkr7iveci"</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="n">data</span> <span class="o">:=</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"https://api.mimos.io/crypto-checkout/v1/charges"</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span> <span class="o">=</span> <span class="n">headers</span>

    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="c">// ...</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'X-MM-APP-ID'</span><span class="p">:</span> <span class="s">'6e1dd7ce21874898b0b77b3288f006fa'</span><span class="p">,</span>
  <span class="s">'X-MM-TIMESTAMP'</span><span class="p">:</span> <span class="s">'1594127461389'</span><span class="p">,</span>
  <span class="s">'X-MM-SIGNATURE'</span><span class="p">:</span> <span class="s">'416D616F6F796778DAC3EEF2F179739D'</span><span class="p">,</span>
  <span class="s">'X-MM-NONCE'</span><span class="p">:</span> <span class="s">'2hjkr7iveci'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://api.mimos.io/crypto-checkout/v1/charges'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div>
<ol>
<li><p>准备请求头和请求内容</p>

<ul>
<li><code>X-MM-APP-ID</code>, <a href="https://w.mimos.io/commerce/en/settings">你的API Key</a></li>
<li><code>X-MM-TIMESTAMP</code>, API请求带上UTC时间戳，以毫秒为单位。客户端时间戳和系统时间戳最多允许5分钟的时间差，超过此范围将会返回<code>Invalid X-MM-TIMESTAMP</code>异常</li>
<li><code>X-MM-NONCE</code>, 唯一的随机字符串用于防止重复请求</li>
<li>请求主体内容</li>
</ul></li>
<li><p>将请求头和请求内容以key-value格式按照ASCII码升序排序（value不为空）并以URL键值对(比如：key1=value1&key2=value2…)拼接成字符串<code>stringA</code><br />
请留意以下规则：</p>

<ul>
<li>参数名ASCII码从小到大排序（字典序）</li>
<li>参数的值为空不参与签名</li>
<li>参数名区分大小写</li>
<li>如果参数的值是一个JSON对象或数组，需要将它进行字符串化处理</li>
</ul></li>
<li><p>再将API Secrect作为<code>key</code>的值拼接到<code>stringA</code>中得到<code>stringB</code></p></li>
<li><p>最后使用MD5对<code>stringB</code>做摘要并将结果转换成全部大写的<code>signatureVal</code></p></li>
</ol>
<h3 id='making-request'>发送请求</h3>
<p>更多详情，请参考<a href="#create-a-charge">创建充值（收款）订单</a></p>
<h3 id='receiving-events'>订阅事件</h3>
<blockquote>
<p>Webhook Example - Headers</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="s2">"X-MM-APP-ID"</span><span class="err">:</span><span class="w"> </span><span class="s2">"6e1dd7ce21874898b0b77b3288f006fa"</span><span class="w">
  </span><span class="s2">"X-MM-NONCE"</span><span class="err">:</span><span class="w"> </span><span class="s2">"15aea03df5cb4f1092c6d15ad0460c59"</span><span class="w">
  </span><span class="s2">"X-MM-SIGNATURE"</span><span class="err">:</span><span class="w"> </span><span class="s2">"14D6A89E4FA1F60B00DB47B379BE3B52"</span><span class="w">
  </span><span class="s2">"CONTENT-TYPE"</span><span class="err">:</span><span class="w"> </span><span class="s2">"application/json"</span><span class="w">
  </span><span class="s2">"CONTENT-LENGTH"</span><span class="err">:</span><span class="w"> </span><span class="mi">1354</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Webhook Example - Body Payload</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tpxXfXTxY7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"charge:complete"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-09T01:23:04.632Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"order_identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3v9YNZzCpG4ltpwgdFDcTR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nk8yl77ffy8m74oxq0f9gi"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"599"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CNY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FIXED_VALUE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594300750683"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594301050683"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sub_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NONE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ethereum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x983eB33A8Bf4D17A600dEaC6cb95E94CF1F3D8EB"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x8d86e3e73aba33806e830a034d1442cd286380c6ff8d989e66d8d3afaaaf35d5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tx_index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.352212"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"base_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"599"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"detected_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594300924112"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594300984154"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"network_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3016320"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xf8933c1cebef545e9a5f8e3eacdd3633fc16d68f8290b0dacf5b1bc4ee0a44be"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594300924112"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"forked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"charge_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://w.dev.mimos.io/crypto-checkout/3v9YNZzCpG4ltpwgdFDcTR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@mimos.io"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recipient_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-new-api"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"crypto_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.352212"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"crypto_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>在<a href='https://w.mimos.io/commerce/settings'>设置</a>里订阅（设置Webhook地址）后，你将会收到对应的事件。</p>

<p>所有MimosPay的Webhook请求都会包含以下请求头，</p>

<ul>
<li><code>X-MM-APP-ID</code>, <a href="https://w.mimos.io/commerce/en/settings">你的API Key</a></li>
<li><code>X-MM-NONCE</code>, 唯一的随机字符串用于防止重复请求</li>
<li><code>X-MM-SIGNATURE</code>, 使用Webhook的共享Secrect，并通过MD5对请求内容中的<code>data</code>字段进行摘要签名</li>
</ul>

<p>建议你在收到Webhook请求后，对请求内容进行签名校验</p>

<p>签名的内容包含,</p>

<ul>
<li><code>X-MM-APP-ID</code></li>
<li><code>X-MM-NONCE</code></li>
<li><code>event.data</code> 在请求内容中</li>
</ul>

<p>签名方式参考<a href="#webhooks">规则</a></p>

<p>更多详情，请参考<a href="#schema-event">Resource - Event</a>.</p>
<h1 id='charges'>充值（收款）</h1><h2 id='create-a-charge'>创建充值（收款）订单</h2>
<p>你需要创建一笔充值（收款）订单来接受加密货币付款</p>

<aside class="notice">
此操作必须使用API密钥进行认证
</aside>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl <span class="nt">-X</span> POST https://api.mimos.io/crypto-checkout/v1/charges <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'X-MM-APP-ID: 6e1dd7ce21874898b0b77b3288f006fa'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'X-MM-TIMESTAMP: 1594643572157'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'X-MM-SIGNATURE: B0499D4EDF0D82A6B18C192311C0C97C'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'X-MM-NONCE: ttmx9loxhtl'</span>
  <span class="nt">--data-binary</span> <span class="s1">'{"external_order_id":"yz7ls58srfih1zmr4dw6y","name":"iphone 11","price":"599","currency":"USD","metadata":"{\"image_url\":\"https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg\",\"customer_id\":\"123456\",\"customer_name\":\"my-user-name\"}"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">fetch</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">node-fetch</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">metadata</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">599</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">iphone 11</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">external_order_id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">yz7ls58srfih1zmr4dw6y</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USD</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">X-MM-APP-ID</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">6e1dd7ce21874898b0b77b3288f006fa</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">X-MM-TIMESTAMP</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">1594643572157</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">X-MM-SIGNATURE</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">B0499D4EDF0D82A6B18C192311C0C97C</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">X-MM-NONCE</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">ttmx9loxhtl</span><span class="dl">'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.mimos.io/crypto-checkout/v1/charges</span><span class="dl">'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">inputBody</span><span class="p">),</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
       <span class="s">"bytes"</span>
       <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="n">headers</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span>
        <span class="s">"Content-Type"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span>
        <span class="s">"Accept"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span>
        <span class="s">"X-MM-APP-ID"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"6e1dd7ce21874898b0b77b3288f006fa"</span><span class="p">},</span>
        <span class="s">"X-MM-TIMESTAMP"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"1594643572157"</span><span class="p">},</span>
        <span class="s">"X-MM-SIGNATURE"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"B0499D4EDF0D82A6B18C192311C0C97C"</span><span class="p">},</span>
        <span class="s">"X-MM-NONCE"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"ttmx9loxhtl"</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="n">data</span> <span class="o">:=</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"https://api.mimos.io/crypto-checkout/v1/charges"</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span> <span class="o">=</span> <span class="n">headers</span>

    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="c">// ...</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">hashlib</span>

<span class="n">appId</span> <span class="o">=</span> <span class="s">'9b0798f2971148ba9828820612ae34bb'</span>
<span class="n">appKey</span> <span class="o">=</span> <span class="s">'gPGZwIu7r5bVP6B8q0HDrEtpM8VOqkTEjXkdfh4lGjYUum7h5ohYoJEfcmaxVork'</span>
<span class="n">timestamp</span> <span class="o">=</span> <span class="mi">1595497196656</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'X-MM-APP-ID'</span><span class="p">:</span> <span class="n">appId</span><span class="p">,</span>
  <span class="s">'X-MM-TIMESTAMP'</span><span class="p">:</span> <span class="s">"{}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
  <span class="s">'X-MM-SIGNATURE'</span><span class="p">:</span> <span class="s">'B0499D4EDF0D82A6B18C192311C0C97C'</span><span class="p">,</span>
  <span class="s">'X-MM-NONCE'</span><span class="p">:</span> <span class="s">'ttmx9loxhtl'</span>
<span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"metadata"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">image_url</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">customer_id</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">123456</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">customer_name</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">my-user-name</span><span class="se">\"</span><span class="s">}"</span><span class="p">,</span>
  <span class="s">"price"</span><span class="p">:</span> <span class="s">"599"</span><span class="p">,</span>
  <span class="s">"name"</span><span class="p">:</span> <span class="s">"iphone 11"</span><span class="p">,</span>
  <span class="s">"external_order_id"</span><span class="p">:</span> <span class="s">"order-ad-{}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">timestamp</span><span class="p">),</span>
  <span class="s">"currency"</span><span class="p">:</span> <span class="s">"USD"</span>
<span class="p">}</span>

<span class="n">total</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-MM-APP-ID'</span><span class="p">:</span> <span class="n">headers</span><span class="p">[</span><span class="s">'X-MM-APP-ID'</span><span class="p">],</span> <span class="s">'X-MM-NONCE'</span><span class="p">:</span> <span class="n">headers</span><span class="p">[</span><span class="s">'X-MM-NONCE'</span><span class="p">],</span>
         <span class="s">'X-MM-TIMESTAMP'</span><span class="p">:</span> <span class="n">headers</span><span class="p">[</span><span class="s">'X-MM-TIMESTAMP'</span><span class="p">]}</span>

<span class="c1"># add payload TotalPrapameter
</span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">payload</span><span class="p">.</span><span class="n">keys</span><span class="p">()):</span>
   <span class="n">total</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">=</span><span class="n">payload</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

<span class="n">t_keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">total</span><span class="p">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">t_keys</span><span class="p">.</span><span class="n">sort</span><span class="p">()</span>

<span class="n">stringA</span> <span class="o">=</span> <span class="s">""</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">t_keys</span> <span class="p">:</span>
  <span class="n">stringA</span><span class="o">+=</span> <span class="s">"{}={}&amp;"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">total</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>

<span class="n">stringA</span><span class="o">+=</span> <span class="s">"key={}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">appKey</span><span class="p">)</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">hashlib</span><span class="p">.</span><span class="n">md5</span><span class="p">()</span>
<span class="n">m</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">stringA</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">hexdigest</span><span class="p">().</span><span class="n">upper</span><span class="p">()</span>

<span class="n">headers</span><span class="p">[</span><span class="s">'X-MM-SIGNATURE'</span><span class="p">]</span> <span class="o">=</span> <span class="n">h</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://api.dev.mimos.io/crypto-checkout/v1/charges'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">),</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div><h3 id='create-a-charge-request'>HTTP请求</h3>
<p><code>POST /v1/charges</code></p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="s2">"yz7ls58srfih1zmr4dw6y"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="s2">"599"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="s2">"{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='create-a-charge-request-headers'>请求头</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>X-MM-APP-ID</td>
<td>string</td>
<td>true</td>
<td><a href="https://w.mimos.io/commerce/en/settings">你的API Key</a></td>
</tr>
<tr>
<td>X-MM-TIMESTAMP</td>
<td>number</td>
<td>true</td>
<td>UTC时间戳，以毫秒为单位, 5分钟内数据有效</td>
</tr>
<tr>
<td>X-MM-NONCE</td>
<td>string</td>
<td>true</td>
<td>唯一的随机字符串, 防止重复提交</td>
</tr>
<tr>
<td>X-MM-SIGNATURE</td>
<td>string</td>
<td>true</td>
<td>请求内容的签名</td>
</tr>
</tbody></table>
<h4 id='create-a-charge-request-body'>请求主体</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>external_order_id</td>
<td>string</td>
<td>true</td>
<td>商户系统中的订单号</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>true</td>
<td>商品订单名称</td>
</tr>
<tr>
<td>price</td>
<td>number</td>
<td>true</td>
<td>本地法币价格</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>true</td>
<td>本地法币币种, 请参考<a href="#fiat-currencies">支持的法币币种</a></td>
</tr>
<tr>
<td>metadata</td>
<td>string</td>
<td>false</td>
<td>商户自定义内容，JSON格式并字符串化<br/>MimosPay支持的字段，如下：<ul><li>image_url: 客户将在收银台页面看到的图片缩略图，地址格式应以<code>http(s)</code>开头，并且以后缀作为结尾<code>jpg&#124;gif&#124;png&#124;jpeg&#124;svg</code></ul></li></td>
</tr>
</tbody></table>
<h3 id='create-a-charge-response'>请求响应</h3>
<blockquote>
<p>Response Examples,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"201"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"created"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"merchant_id"</span><span class="p">:</span><span class="s2">"117510825734795264"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"37877858784210944"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_identifier"</span><span class="p">:</span><span class="s2">"3v9YNZzCpG41vgMGZtRLPD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="s2">"yz7ls58srfih1zmr4dw6y"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"599"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"FIXED_VALUE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1594643585263"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expired_at"</span><span class="p">:</span><span class="s2">"1594644485263"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"PRE_ORDER"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sub_state"</span><span class="p">:</span><span class="s2">"NONE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"charge_pricing"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"ethereum"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"2.460093"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="s2">"{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"charge_url"</span><span class="p">:</span><span class="s2">"https://w.mimos.io/crypto-checkout/3v9YNZzCpG41vgMGZtRLPD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required_info"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"recipient_name"</span><span class="p">:</span><span class="s2">"test-new-api"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">Invalid</span><span class="w"> </span><span class="err">X-MM-TIMESTAMP</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"400"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"22000004"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"Invalid X-MM-TIMESTAMP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"module"</span><span class="p">:</span><span class="s2">"22"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"module_name"</span><span class="p">:</span><span class="s2">"CHECKOUT_API"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"22000004"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"Invalid X-MM-TIMESTAMP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"biz.invalid.request.timestamp"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.2">Created</a></td>
<td>Created</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Bad Request</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
<tr>
<td>404</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.4">Not Found</a></td>
<td>Not Found</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
</tbody></table>
<h2 id='update-a-charge'>更新充值（收款）订单</h2>
<p>如果在创建订单时候，包含了必填信息的设置，客户将需要填写必要信息以继续支付。默认必填信息：用户账单邮件地址，支付方式。</p>

<p>同时MimosPay将提供加密货币地址，以接收当前充值（收款）。</p>

<p>客户应该订单超时前进行加密货币的付款。</p>

<aside class="success">
当前操作不需要用户认证
</aside>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl <span class="nt">-X</span> PUT https://api.mimos.io/crypto-checkout/v1/charges/<span class="o">{</span>order_identifier<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span>
  <span class="nt">--data-binary</span> <span class="s1">'{"payment_method":"ethereum","bill_address":"test@test.io"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">fetch</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">node-fetch</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">bill_address</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">test@test.io</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">payment_method</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">ethereum</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.mimos.io/crypto-checkout/v1/charges/{order_identifier}</span><span class="dl">'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">inputBody</span><span class="p">),</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
       <span class="s">"bytes"</span>
       <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="n">headers</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span>
        <span class="s">"Content-Type"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span>
        <span class="s">"Accept"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="n">data</span> <span class="o">:=</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="s">"https://api.mimos.io/crypto-checkout/v1/charges/{order_identifier}"</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span> <span class="o">=</span> <span class="n">headers</span>

    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="c">// ...</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"bill_address"</span><span class="p">:</span><span class="s">"test@test.io"</span><span class="p">,</span>
  <span class="s">"payment_method"</span><span class="p">:</span><span class="s">"ethereum"</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="s">'https://api.mimos.io/crypto-checkout/v1/charges/{order_identifier}'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div><h3 id='update-a-charge-request'>HTTP请求</h3>
<p><code>PUT /v1/charges/{order_identifier}</code></p>
<h4 id='update-a-charge-request-path'>Request Path</h4>
<p><code>order_identifier</code>: 订单唯一标识符</p>
<h4 id='update-a-charge-request-params'>请求参数</h4>
<blockquote>
<p>Body parameter</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="s2">"test@test.io"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h4 id='update-a-charge-request-body'>请求主体</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_method</td>
<td>string</td>
<td>true</td>
<td>支付方式，参考：<a href="##crypto-currencies">支持的加密货币币种</a>:<ul><li>ethereum</li><li>bitcoin</li><li>tether</li></ul></td>
</tr>
<tr>
<td>bill_address</td>
<td>string</td>
<td>false</td>
<td>客户电子邮箱地址，用于接收支付或是退款状态通知</td>
</tr>
<tr>
<td>customer_name</td>
<td>string</td>
<td>false</td>
<td>客户名</td>
</tr>
</tbody></table>
<h3 id='update-a-charge-response'>请求响应</h3>
<blockquote>
<p>Response Examples,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"200"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"merchant_id"</span><span class="p">:</span><span class="s2">"117510825734795264"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"37877858784210944"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_identifier"</span><span class="p">:</span><span class="s2">"3v9YNZzCpG41vgMGZtRLPD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="s2">"yz7ls58srfih1zmr4dw6y"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"599"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"remain_amount"</span><span class="p">:</span><span class="s2">"599"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"FIXED_VALUE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1594643932916"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expired_at"</span><span class="p">:</span><span class="s2">"1594644232916"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"NEW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sub_state"</span><span class="p">:</span><span class="s2">"NONE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"addresses"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"ethereum"</span><span class="p">:</span><span class="s2">"0xd5f7fEE1f0E0dCecccc80a847fE57e9DEcDDad88"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"charge_pricing"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"ethereum"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"2.460692"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="s2">"{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"charge_url"</span><span class="p">:</span><span class="s2">"https://w.mimos.io/crypto-checkout/3v9YNZzCpG41vgMGZtRLPD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required_info"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="s2">"test@test.io"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recipient_name"</span><span class="p">:</span><span class="s2">"test-new-api"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"crypto_amount"</span><span class="p">:</span><span class="s2">"2.460692"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"crypto_currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>OK</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
<tr>
<td>404</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.4">Not Found</a></td>
<td>Not Found</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
</tbody></table>
<h2 id='show-a-charge'>查询充值（收款）订单</h2>
<aside class="success">
当前操作不需要用户认证
</aside>

<p>通过订单唯一标识符查询订单详细信息。创建订单成功时，也会返回当前订单详细信息。</p>

<blockquote>
<p>Code samples</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl <span class="nt">-X</span> GET https://api.mimos.io/crypto-checkout/v1/charges/<span class="o">{</span>order_identifier<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="nx">fetch</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">node-fetch</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">:</span><span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.mimos.io/crypto-checkout/v1/charges/{order_identifier}</span><span class="dl">'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
       <span class="s">"bytes"</span>
       <span class="s">"net/http"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="n">headers</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span>
        <span class="s">"Accept"</span><span class="o">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="n">data</span> <span class="o">:=</span> <span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span>
    <span class="n">req</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"https://api.mimos.io/crypto-checkout/v1/charges/{order_identifier}"</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">req</span><span class="o">.</span><span class="n">Header</span> <span class="o">=</span> <span class="n">headers</span>

    <span class="n">client</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span>
    <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
    <span class="c">// ...</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://api.mimos.io/crypto-checkout/v1/charges/{order_identifier}'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>

</code></pre></div><h3 id='show-a-charge-request'>HTTP请求</h3>
<p><code>GET /v1/charges/{order_identifier}</code></p>
<h4 id='show-a-charge-request-path'>Request Path</h4>
<p><code>order_identifier</code>: 订单唯一标识符</p>
<h4 id='show-a-charge-request-params'>请求参数</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>show_details</td>
<td>boolean</td>
<td>false</td>
<td>显示详细信息，默认：是</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response, show_details = false</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code></code></pre></div>
<blockquote>
<p>200 Response, show_details = true</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"200"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"merchant_id"</span><span class="p">:</span><span class="s2">"117510825734795264"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"37870665871618048"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_identifier"</span><span class="p">:</span><span class="s2">"3v9YNZzCpG41vgz5kCjwyK"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="s2">"c3yo4kmimhw0v8924ch36m9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"remain_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"CNY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"FIXED_VALUE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1594641884350"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expired_at"</span><span class="p">:</span><span class="s2">"1594642184350"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"CANCEL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sub_state"</span><span class="p">:</span><span class="s2">"UNDERPAID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"addresses"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"ethereum"</span><span class="p">:</span><span class="s2">"0x0A4C37559feE8EbB30d21242E370e332564d60C1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"charge_pricing"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"ethereum"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.000004"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"network"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tx_hash"</span><span class="p">:</span><span class="s2">"0x7932bc20a7cfe2343e7d8ca08fb613d47465725f11a109a837be16070b89ffb1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tx_index"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.057911"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"base_amount"</span><span class="p">:</span><span class="s2">"98.99"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"detected_at"</span><span class="p">:</span><span class="s2">"1594642153956"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"confirmed_at"</span><span class="p">:</span><span class="s2">"1594642212623"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block"</span><span class="p">:{</span><span class="w">
          </span><span class="nl">"network_id"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"height"</span><span class="p">:</span><span class="s2">"3039067"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"hash"</span><span class="p">:</span><span class="s2">"0x37d5cd540512590692a23a2be0c7a553e328aad3a1835660fe2666a5bdab8dc0"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1594642153956"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"forked"</span><span class="p">:</span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="s2">"{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"charge_url"</span><span class="p">:</span><span class="s2">"https://w.mimos.io/crypto-checkout/3v9YNZzCpG41vgz5kCjwyK"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required_info"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="s2">"test@aerohive.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recipient_name"</span><span class="p">:</span><span class="s2">"test-new-api"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"crypto_amount"</span><span class="p">:</span><span class="s2">"0.057915"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"crypto_currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refunds"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"network"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"to_address"</span><span class="p">:</span><span class="s2">"0x0Ad3355B3023f73a2C443Fe2C8440735d1589596"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.057911"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"detected_at"</span><span class="p">:</span><span class="s2">"1594642448830"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"confirmed_at"</span><span class="p">:</span><span class="s2">"1594642452707"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tx_hash"</span><span class="p">:</span><span class="s2">"0xe7c24562dcefc45c11c2716d88fb1ae52d4971295454a912fb2734711b6420a4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tx_index"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block"</span><span class="p">:{</span><span class="w">
          </span><span class="nl">"network_id"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"height"</span><span class="p">:</span><span class="s2">"3039087"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"hash"</span><span class="p">:</span><span class="s2">"0x400a1111fcb8f3eec6c1e222b78260b1bbce8b58df97d8257cd5c53ca41f5564"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1594642448742"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"forked"</span><span class="p">:</span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='show-a-charge-response'>请求响应</h3>
<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>OK</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Bad Request</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
<tr>
<td>404</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.4">Not Found</a></td>
<td>Not Found</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error</td>
<td><a href="#schema-apiresponse">ApiResponse</a></td>
</tr>
</tbody></table>
<h1 id='webhooks'>Webhooks</h1>
<p>Webhooks (回调通知)可以帮助商户更及时的掌握充值（收款）相关事件。可以通过设置页面编辑你的API Key配置对应的URL来订阅事件。</p>

<blockquote>
<p>Request Example - Headers</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="s2">"X-MM-APP-ID"</span><span class="err">:</span><span class="w"> </span><span class="s2">"6e1dd7ce21874898b0b77b3288f006fa"</span><span class="w">
  </span><span class="s2">"X-MM-NONCE"</span><span class="err">:</span><span class="w"> </span><span class="s2">"15aea03df5cb4f1092c6d15ad0460c59"</span><span class="w">
  </span><span class="s2">"X-MM-SIGNATURE"</span><span class="err">:</span><span class="w"> </span><span class="s2">"14D6A89E4FA1F60B00DB47B379BE3B52"</span><span class="w">
  </span><span class="s2">"CONTENT-TYPE"</span><span class="err">:</span><span class="w"> </span><span class="s2">"application/json"</span><span class="w">
  </span><span class="s2">"CONTENT-LENGTH"</span><span class="err">:</span><span class="w"> </span><span class="mi">1354</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Request Example - Body Payload</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tpxXfXTxY7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"charge:complete"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-09T01:23:04.632Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"order_identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3v9YNZzCpG4ltpwgdFDcTR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nk8yl77ffy8m74oxq0f9gi"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"599"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CNY"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FIXED_VALUE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594300750683"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594301050683"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sub_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NONE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ethereum"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x983eB33A8Bf4D17A600dEaC6cb95E94CF1F3D8EB"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x8d86e3e73aba33806e830a034d1442cd286380c6ff8d989e66d8d3afaaaf35d5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tx_index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.352212"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"base_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"599"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"detected_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594300924112"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594300984154"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"network_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3016320"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xf8933c1cebef545e9a5f8e3eacdd3633fc16d68f8290b0dacf5b1bc4ee0a44be"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1594300924112"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"forked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"charge_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://w.dev.mimos.io/crypto-checkout/3v9YNZzCpG4ltpwgdFDcTR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@mimos.io"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"recipient_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-new-api"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"crypto_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.352212"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"crypto_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>A <span class="o">=</span> <span class="s1">'crypto_currency=ETH&amp;amount=599&amp;addresses={"ethereum":"0x983eB33A8Bf4D17A600dEaC6cb95E94CF1F3D8EB"}&amp;metadata={"image_url": "https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg", "customer_id": "123456", "customer_name": "my-user-name"}&amp;sub_state=NONE&amp;crypto_amount=0.352212&amp;payments=[{"network":"ethereum","tx_hash":"0x8d86e3e73aba33806e830a034d1442cd286380c6ff8d989e66d8d3afaaaf35d5","tx_index":"2","amount":"0.352212","currency":"ETH","base_amount":"599","state":"COMPLETE","detected_at":"1594300924112","confirmed_at":"1594300984154","block":{"network_id":"5","height":"3016320","hash":"0xf8933c1cebef545e9a5f8e3eacdd3633fc16d68f8290b0dacf5b1bc4ee0a44be","time":"1594300924112","required_confirmed":"6","accumulated_confirmed":"6","forked":false}}]&amp;created_at=1594300750683&amp;expired_at=1594301050683&amp;X-MM-NONCE=15aea03df5cb4f1092c6d15ad0460c59&amp;type=FIXED_VALUE&amp;bill_address=test@mimos.io&amp;charge_url=https://w.dev.mimos.io/crypto-checkout/3v9YNZzCpG4ltpwgdFDcTR&amp;order_identifier=3v9YNZzCpG4ltpwgdFDcTR&amp;name=iphone 11&amp;X-MM-APP-ID=6e1dd7ce21874898b0b77b3288f006fa&amp;external_order_id=nk8yl77ffy8m74oxq0f9gi&amp;currency=CNY&amp;state=COMPLETE&amp;recipient_name=test-new-api&amp;payment_method=ethereum&amp;required_info={"bill_address":true,"customer_name":false}'</span>

<span class="nv">stringA</span><span class="o">=</span> <span class="s1">'X-MM-APP-ID=6e1dd7ce21874898b0b77b3288f006fa&amp;X-MM-NONCE=15aea03df5cb4f1092c6d15ad0460c59&amp;addresses={"ethereum":"0x983eB33A8Bf4D17A600dEaC6cb95E94CF1F3D8EB"}&amp;amount=599&amp;bill_address=test@mimos.io&amp;charge_url=https://w.dev.mimos.io/crypto-checkout/3v9YNZzCpG4ltpwgdFDcTR&amp;created_at=1594300750683&amp;crypto_amount=0.352212&amp;crypto_currency=ETH&amp;currency=CNY&amp;expired_at=1594301050683&amp;external_order_id=nk8yl77ffy8m74oxq0f9gi&amp;metadata={"image_url": "https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg", "customer_id": "123456", "customer_name": "my-user-name"}&amp;name=iphone 11&amp;order_identifier=3v9YNZzCpG4ltpwgdFDcTR&amp;payment_method=ethereum&amp;payments=[{"network":"ethereum","tx_hash":"0x8d86e3e73aba33806e830a034d1442cd286380c6ff8d989e66d8d3afaaaf35d5","tx_index":"2","amount":"0.352212","currency":"ETH","base_amount":"599","state":"COMPLETE","detected_at":"1594300924112","confirmed_at":"1594300984154","block":{"network_id":"5","height":"3016320","hash":"0xf8933c1cebef545e9a5f8e3eacdd3633fc16d68f8290b0dacf5b1bc4ee0a44be","time":"1594300924112","required_confirmed":"6","accumulated_confirmed":"6","forked":false}}]&amp;recipient_name=test-new-api&amp;required_info={"bill_address":true,"customer_name":false}&amp;state=COMPLETE&amp;sub_state=NONE&amp;type=FIXED_VALUE'</span>

<span class="c"># Assue the API Secret is</span>
<span class="s1">'2ywkGuHBZhnVatOrglZyeiBzuOvYvKgNvzZCWlQHqh6m0uHWpE5h95H62BSnymJL'</span>
<span class="nv">stringB</span><span class="o">=</span> stringA + <span class="s1">'&amp;key=2ywkGuHBZhnVatOrglZyeiBzuOvYvKgNvzZCWlQHqh6m0uHWpE5h95H62BSnymJL'</span>

<span class="c"># MD5, '14D6A89E4FA1F60B00DB47B379BE3B52'</span>
signatureVal <span class="o">=</span> MD5<span class="o">(</span>stringB<span class="o">)</span>.toUpperCase<span class="o">()</span>

<span class="c"># HmacSHA256, '7E758388691B06E1CCFC92F73F934CDEFB71B913434DEF3FB925B2CCDA54D622'</span>
signatureVal <span class="o">=</span> HmacSHA256<span class="o">(</span>stringB, secrect<span class="o">)</span>.toUpperCase<span class="o">()</span>
</code></pre></div>
<p>使用Webhook的共享密钥来验证MimosPay发出的请求头里的<code>X-MM-SIGNATURE</code>，</p>

<ol>
<li><p>准备签名内容</p>

<ul>
<li><code>X-MM-APP-ID</code>, <a href="https://w.mimos.io/commerce/en/settings">你的API Key</a></li>
<li><code>X-MM-NONCE</code>, 唯一的随机字符串用于防止重复请求</li>
<li><code>event.data</code>，包含在请求主体中</li>
</ul></li>
<li><p>将请求头和请求内容以key-value格式按照ASCII码升序排序（value不为空）并以URL键值对(比如：key1=value1&key2=value2…)拼接成字符串<code>stringA</code><br />
请留意以下规则：</p>

<ul>
<li>参数名ASCII码从小到大排序（字典序）</li>
<li>参数的值为空不参与签名</li>
<li>参数名区分大小写</li>
<li>如果参数的值是一个JSON对象或数组，需要将它进行字符串化处理</li>
</ul></li>
<li><p>再将API Secrect作为<code>key</code>的值拼接到<code>stringA</code>中得到<code>stringB</code></p></li>
<li><p>最后使用MD5对<code>stringB</code>做摘要并将结果转换成全部大写的<code>signatureVal</code></p></li>
</ol>
<h1 id='schema-resources'>资源定义</h1>
<aside class="notice">
<code>Number</code>类型在MimosPay中表示为字符串<br/><br/>
以避免某些库和语言无法正常反序列化JSON，
<ul>
  <li>要求高精度的数字字段</li>
  <li>数字范围超过-(2<sup>53</sup> -1) ~ (2<sup>53</sup> - 1)</li>
</ul>
</aside>
<h2 id='schema-apiresponse'>ApiResponse</h2>
<blockquote>
<p>Example,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"200"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"order_identifier"</span><span class="p">:</span><span class="s2">"3v9YNZzCpG41vgz5kCjwyK"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="s2">"c3yo4kmimhw0v8924ch36m9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"remain_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"400"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"22000004"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"Invalid X-MM-TIMESTAMP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"module"</span><span class="p">:</span><span class="s2">"22"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"module_name"</span><span class="p">:</span><span class="s2">"CHECKOUT_API"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="s2">"22000004"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"Invalid X-MM-TIMESTAMP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"key"</span><span class="p">:</span><span class="s2">"biz.invalid.request.timestamp"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>number</td>
<td>HTTP status code</td>
</tr>
<tr>
<td>code</td>
<td>number</td>
<td><ul><li>0 - success</li><li>Not zero number - error codes</li></ul></td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>success or error message</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>the object defined in <a href="#schema-resources">resources</a> when response <code>2xx</code></td>
</tr>
<tr>
<td>error</td>
<td>object</td>
<td>the error object when response <code>4xx</code> or <code>5xx</code></td>
</tr>
</tbody></table>
<h2 id='schema-charge-order'>Charge</h2>
<blockquote>
<p>Example,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"merchant_id"</span><span class="p">:</span><span class="s2">"117510825734795264"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"37870665871618048"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_identifier"</span><span class="p">:</span><span class="s2">"3v9YNZzCpG41vgz5kCjwyK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"external_order_id"</span><span class="p">:</span><span class="s2">"c3yo4kmimhw0v8924ch36m9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"iphone 11"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"99"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"remain_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"CNY"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"FIXED_VALUE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="s2">"1594641884350"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expired_at"</span><span class="p">:</span><span class="s2">"1594642184350"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"CANCEL"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sub_state"</span><span class="p">:</span><span class="s2">"UNDERPAID"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"addresses"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"ethereum"</span><span class="p">:</span><span class="s2">"0x0A4C37559feE8EbB30d21242E370e332564d60C1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"charge_pricing"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"ethereum"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.000004"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payments"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"network"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tx_hash"</span><span class="p">:</span><span class="s2">"0x7932bc20a7cfe2343e7d8ca08fb613d47465725f11a109a837be16070b89ffb1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tx_index"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.057911"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_amount"</span><span class="p">:</span><span class="s2">"98.99"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"detected_at"</span><span class="p">:</span><span class="s2">"1594642153956"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"confirmed_at"</span><span class="p">:</span><span class="s2">"1594642212623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"network_id"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="s2">"3039067"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hash"</span><span class="p">:</span><span class="s2">"0x37d5cd540512590692a23a2be0c7a553e328aad3a1835660fe2666a5bdab8dc0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1594642153956"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"forked"</span><span class="p">:</span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="s2">"{</span><span class="se">\"</span><span class="s2">image_url</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">https://images-na.ssl-images-amazon.com/images/I/61wjAvw5B2L._AC_SX425_.jpg</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">123456</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">customer_name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">my-user-name</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"charge_url"</span><span class="p">:</span><span class="s2">"https://w.dev.mimos.io/crypto-checkout/3v9YNZzCpG41vgz5kCjwyK"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required_info"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="s2">"test@aerohive.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recipient_name"</span><span class="p">:</span><span class="s2">"test-new-api"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"crypto_amount"</span><span class="p">:</span><span class="s2">"0.057915"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"crypto_currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refunds"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"network"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_address"</span><span class="p">:</span><span class="s2">"0x0Ad3355B3023f73a2C443Fe2C8440735d1589596"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.057911"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"detected_at"</span><span class="p">:</span><span class="s2">"1594642448830"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"confirmed_at"</span><span class="p">:</span><span class="s2">"1594642452707"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tx_hash"</span><span class="p">:</span><span class="s2">"0xe7c24562dcefc45c11c2716d88fb1ae52d4971295454a912fb2734711b6420a4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tx_index"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"network_id"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="s2">"3039087"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hash"</span><span class="p">:</span><span class="s2">"0x400a1111fcb8f3eec6c1e222b78260b1bbce8b58df97d8257cd5c53ca41f5564"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1594642448742"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"forked"</span><span class="p">:</span><span class="kc">false</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id</td>
<td>number</td>
<td>The id of merchant</td>
</tr>
<tr>
<td>order_id</td>
<td>number</td>
<td>The id of charge order</td>
</tr>
<tr>
<td>checkout_id</td>
<td>string</td>
<td>The id of checkout order</td>
</tr>
<tr>
<td>order_identifier</td>
<td>string</td>
<td>The identifier of charge order</td>
</tr>
<tr>
<td>external_order_id</td>
<td>string</td>
<td>The order id of the merchant&#39;s own system</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>The product/order name</td>
</tr>
<tr>
<td>amount</td>
<td>number</td>
<td>Price in local fiat currency</td>
</tr>
<tr>
<td>remain_amount</td>
<td>number</td>
<td>The remaining price in local fiat currency</td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td>Crypto payment methods, see <a href="#crypto-currencies">Supported Crypto Currencies</a></td>
</tr>
<tr>
<td>bill_address</td>
<td>string</td>
<td>The email address from customer</td>
</tr>
<tr>
<td>customer_name</td>
<td>string</td>
<td>The name from customer</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Three-letter ISO currency code, in uppercase. Must be a <a href="#fiat-currencies">supported currency</a></td>
</tr>
<tr>
<td>created_at</td>
<td>number</td>
<td>The UTC timestamp in millisecond of charge order creation time</td>
</tr>
<tr>
<td>expired_at</td>
<td>number</td>
<td>The UTC timestamp in millisecond of charge order expiration time</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The charge state:<ul><li>PRE_ORDER</li><li>NEW</li><li>PENDING</li><li>CONFIRMING</li><li>COMPLETE</li><li>CANCEL</li></ul></td>
</tr>
<tr>
<td>sub_state</td>
<td>string</td>
<td>The charge sub state:<ul><li>NONE</li><li>EXPIRED</li><li>UNDERPAID</li><li>OVERPAID</li></ul></td>
</tr>
<tr>
<td>metadata</td>
<td>string</td>
<td>Metadata associated with the charge</td>
</tr>
<tr>
<td>charge_url</td>
<td>string</td>
<td>MimosPay Hosted charge URL</td>
</tr>
<tr>
<td>redirect_url</td>
<td>string</td>
<td>Merchant Hosted payment success redirect URL</td>
</tr>
<tr>
<td>cancel_url</td>
<td>string</td>
<td>Merchant Hosted payment failure redirect URL</td>
</tr>
<tr>
<td>crypto_amount</td>
<td>number</td>
<td>Price in crypto currency</td>
</tr>
<tr>
<td>crypto_currency</td>
<td>string</td>
<td>The crypto currency code, in uppercase. Must be a <a href="#crypto-currencies">supported currency</a></td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>The type of charge,<ul><li>FIXED_VALUE</li><li>ANY_VALUE</li></ul></td>
</tr>
<tr>
<td>recipient_name</td>
<td>string</td>
<td>The name of recipient</td>
</tr>
<tr>
<td>unresolved_id</td>
<td>number</td>
<td>The unresolved id associated with the charge, if there exist the unresolved payment in, <ul><li>EXPIRED</li><li>UNDERPAID</li><li></li><li>OVERPAID</li></ul></td>
</tr>
<tr>
<td>required_info</td>
<td><a href="#schema-charge-order-required-information">Charge Rquried</a></td>
<td>The charge requirement information</td>
</tr>
<tr>
<td>addresses</td>
<td>map&lt;string, string&gt;</td>
<td>Set of addresses associated with the charge, the key is payment method</td>
</tr>
<tr>
<td>» <strong>additionalProperties</strong></td>
<td>string</td>
<td>The associated crypto address</td>
</tr>
<tr>
<td>charge_pricing</td>
<td>map&lt;string, object&gt;</td>
<td>Set of price information associated with the charge, the key is payment method</td>
</tr>
<tr>
<td>» <strong>additionalProperties</strong></td>
<td><a href="#schema-charge-order-price">Charge Prices</a></td>
<td>The associated price in the specific payment method</td>
</tr>
<tr>
<td>payments</td>
<td><a href="#schema-charge-order-payment">Charge Payment[]</a></td>
<td>Array of charge payment objects</td>
</tr>
<tr>
<td>refunds</td>
<td><a href="#schema-charge-order-refund">Charge Refund[]</a></td>
<td>Array of charge refund objects</td>
</tr>
</tbody></table>
<h3 id='schema-charge-order-price'>Charge Price</h3>
<blockquote>
<p>Example,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.232"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>number</td>
<td>Price in crypto currency</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>The crypto currency code, in uppercase. Must be a <a href="#crypto-currencies">supported currency</a></td>
</tr>
</tbody></table>
<h3 id='schema-charge-order-payment'>Charge Payments</h3>
<blockquote>
<p>Example,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"network"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tx_hash"</span><span class="p">:</span><span class="s2">"0x9978bc4c44a9a14151d9cfeed557ab51feb6548b2c8f101b44a67a92091f1df7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tx_index"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from_address"</span><span class="p">:</span><span class="s2">"0x0ad3355b3023f73a2c443fe2c8440735d1589596"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.001876"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base_amount"</span><span class="p">:</span><span class="s2">"3.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"COMPLETE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"detected_at"</span><span class="p">:</span><span class="s2">"1593761577651"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmed_at"</span><span class="p">:</span><span class="s2">"1593761641110"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"block"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"network_id"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="s2">"2980446"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="s2">"0xdfca138018a58ef29606084d59ec3d1b48221c71b2c52ae7904617a7c3a77b0b"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1593761577651"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"forked"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>network</td>
<td>string</td>
<td>Crypto network, see <a href="#crypto-currencies">Supported Crypto Currencies</a></td>
</tr>
<tr>
<td>tx_hash</td>
<td>string</td>
<td>The blockchain transaction hash for the charge payment</td>
</tr>
<tr>
<td>tx_index</td>
<td>number</td>
<td>The blockchain transaction index for the charge payment</td>
</tr>
<tr>
<td>from_address</td>
<td>string</td>
<td>The address of customer which sent the crypto currency</td>
</tr>
<tr>
<td>amount</td>
<td>number</td>
<td>The amount of crypto currency sent to the requested address</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Crypto currency, see <a href="#crypto-currencies">Supported Crypto Currencies</a></td>
</tr>
<tr>
<td>base_amount</td>
<td>number</td>
<td>The amount in fiat currency by currency conversion</td>
</tr>
<tr>
<td>base_currency</td>
<td>string</td>
<td>Fiat currency, see <a href="#fiat-currencies">Supported Fiat Currencies</a></td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The payment state:<ul><li>PENDING</li><li>FORKED</li><li>COMPLETE</li></ul></td>
</tr>
<tr>
<td>detected_at</td>
<td>number</td>
<td>The UTC timestamp in millisecond of payment detection time</td>
</tr>
<tr>
<td>confirmed_at</td>
<td>number</td>
<td>The UTC timestamp in millisecond of payment confirmation time</td>
</tr>
<tr>
<td>block</td>
<td><a href="#schema-block-tx">Block Tx</a></td>
<td>none</td>
</tr>
</tbody></table>
<h3 id='schema-charge-order-refund'>Charge Refund</h3>
<blockquote>
<p>Exmaple,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"network"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"to_address"</span><span class="p">:</span><span class="s2">"0x0Ad3355B3023f73a2C443Fe2C8440735d1589596"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="s2">"0.005866"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"PENDING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state_code"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"detected_at"</span><span class="p">:</span><span class="s2">"1594043557364"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"confirmed_at"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tx_hash"</span><span class="p">:</span><span class="s2">"0x6930b6d590c1468c479bd30dc3bfa1c7170cbc1834c2cfd47ac57ad7aaf82cf1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tx_index"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"block"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"network_id"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="s2">"2999165"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hash"</span><span class="p">:</span><span class="s2">"0xc057e1d2fa53b8ff64c272bbd4057bd5778d8b43a4e367839caaded051ddadae"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1594043557252"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"forked"</span><span class="p">:</span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>network</td>
<td>string</td>
<td>Crypto network, see <a href="#crypto-currencies">Supported Crypto Currencies</a></td>
</tr>
<tr>
<td>tx_hash</td>
<td>string</td>
<td>The blockchain transaction hash for the charge payment</td>
</tr>
<tr>
<td>tx_index</td>
<td>number</td>
<td>The blockchain transaction index for the charge payment</td>
</tr>
<tr>
<td>to_address</td>
<td>string</td>
<td>The address of customer which receive the crypto currency</td>
</tr>
<tr>
<td>amount</td>
<td>number</td>
<td>The amount of crypto currency sent to the requested address</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Crypto currency, see <a href="#crypto-currencies">Supported Crypto Currencies</a></td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The payment state:<ul><li>NEW</li><li>PENDING</li><li>COMPLETE</li><li>CANCEL</li></ul></td>
</tr>
<tr>
<td>detected_at</td>
<td>number</td>
<td>The UTC timestamp in millisecond of payment detection time</td>
</tr>
<tr>
<td>confirmed_at</td>
<td>number</td>
<td>The UTC timestamp in millisecond of payment confirmation time</td>
</tr>
<tr>
<td>fee</td>
<td>number</td>
<td>none</td>
</tr>
<tr>
<td>block</td>
<td><a href="#schema-block-tx">Block Tx</a></td>
<td>none</td>
</tr>
</tbody></table>
<h3 id='schema-charge-order-required-information'>Charge Required Informations</h3>
<blockquote>
<p>Example,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="s2">"ethereum"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bill_address"</span><span class="p">:</span><span class="s2">"test@test.io"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a_customer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_method</td>
<td>string</td>
<td>Payment method which is listed in <a href="##crypto-currencies">Supported Crypto Currencies</a>:<ul><li>ethereum</li><li>bitcoin</li><li>tether</li></ul></td>
</tr>
<tr>
<td>bill_address</td>
<td>string</td>
<td>Customer email address to receive payment or refund notifications</td>
</tr>
<tr>
<td>customer_name</td>
<td>string</td>
<td>Customer name for email content</td>
</tr>
</tbody></table>
<h2 id='schema-block-tx'>Block Tx Information</h2>
<blockquote>
<p>Example,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"network_id"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="s2">"2999165"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="s2">"0xc057e1d2fa53b8ff64c272bbd4057bd5778d8b43a4e367839caaded051ddadae"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"1594043557252"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required_confirmed"</span><span class="p">:</span><span class="s2">"6"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accumulated_confirmed"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"forked"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>network_id</td>
<td>number</td>
<td>The id of network</td>
</tr>
<tr>
<td>height</td>
<td>number</td>
<td>The block height associated with the blockchain transaction</td>
</tr>
<tr>
<td>hash</td>
<td>string</td>
<td>The block hash associated with the blockchain transaction</td>
</tr>
<tr>
<td>time</td>
<td>number</td>
<td>The time at the block is mined</td>
</tr>
<tr>
<td>required_confirmed</td>
<td>number</td>
<td>The number of requried blockchain confirmations</td>
</tr>
<tr>
<td>accumulated_confirmed</td>
<td>number</td>
<td>The number of accumulated blockchain confirmations, it will stop giving updates on associated order is terminated</td>
</tr>
<tr>
<td>forked</td>
<td>boolean</td>
<td>The blockchain has a soft fork occurs or not on this block height</td>
</tr>
</tbody></table>
<h2 id='schema-event'>Event</h2>
<blockquote>
<p>Example,</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tpxXfXTxY7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"charge:new"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"create_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-01T01:23:04.632Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Delivery event id</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Delivery event type,<br/><ul><li>charge:new</li><li>charge:pending</li><li>charge:confirming</li><li>charge:complete</li><li>charge:cancel</li></ul></td>
</tr>
<tr>
<td>create_at</td>
<td>string</td>
<td>The UTC timestamp, e.g., 2020-07-01T01:23:04.632Z</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>Event payload,<br/><ul><li><a href="#schema-charge-order">charge</a></li></ul>The resouce of the associated object (e.g. <code>charge</code>)</td>
</tr>
</tbody></table>

<p>The events types,</p>

<table><thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>charge:new</code></td>
<td>A charge is created</td>
</tr>
<tr>
<td><code>charge:pending</code></td>
<td>The Charge has been first detected on blockchain but has not been confrimed yet</td>
</tr>
<tr>
<td><code>charge:confirming</code></td>
<td>The charge has been detected and the payment amount is equal or greater than order price but has not been confrimed yet</td>
</tr>
<tr>
<td><code>charge:complete</code></td>
<td>The charge has be confirmed to completed</td>
</tr>
<tr>
<td><code>charge:cancel</code></td>
<td>The charge failed to complete, for:<ul><li>Payment expired</li><li>Payment underpaid</li></ul></td>
</tr>
</tbody></table>
<h1 id='currencies'>支持的货币</h1>
<p>以下是和价格相关的货币列表。</p>
<h2 id='fiat-currencies'>法定货币</h2>
<p>MimosPay当前支持<a href='https://zh.wikipedia.org/wiki/ISO_4217'>ISO 4217</a>中定义的货币列表。</p>

<table><thead>
<tr>
<th>Code</th>
<th>Currency</th>
</tr>
</thead><tbody>
<tr>
<td>AED</td>
<td>United Arab Emirates Dirham</td>
</tr>
<tr>
<td>AFN</td>
<td>Afghan Afghani</td>
</tr>
<tr>
<td>ALL</td>
<td>Albanian Lek</td>
</tr>
<tr>
<td>AMD</td>
<td>Armenian Dram</td>
</tr>
<tr>
<td>ANG</td>
<td>Netherlands Antillean Guilder</td>
</tr>
<tr>
<td>AOA</td>
<td>Angolan Kwanza</td>
</tr>
<tr>
<td>ARS</td>
<td>Argentine Peso</td>
</tr>
<tr>
<td>AUD</td>
<td>Australian Dollar</td>
</tr>
<tr>
<td>AWG</td>
<td>Aruban Florin</td>
</tr>
<tr>
<td>AZN</td>
<td>Azerbaijani Manat</td>
</tr>
<tr>
<td>BAM</td>
<td>Bosnia-Herzegovina Convertible Mark</td>
</tr>
<tr>
<td>BBD</td>
<td>Barbadian Dollar</td>
</tr>
<tr>
<td>BDT</td>
<td>Bangladeshi Taka</td>
</tr>
<tr>
<td>BGN</td>
<td>Bulgarian Lev</td>
</tr>
<tr>
<td>BHD</td>
<td>Bahraini Dinar</td>
</tr>
<tr>
<td>BIF</td>
<td>Burundian Franc</td>
</tr>
<tr>
<td>BMD</td>
<td>Bermudan Dollar</td>
</tr>
<tr>
<td>BND</td>
<td>Brunei Dollar</td>
</tr>
<tr>
<td>BOB</td>
<td>Bolivian Boliviano</td>
</tr>
<tr>
<td>BRL</td>
<td>Brazilian Real</td>
</tr>
<tr>
<td>BSD</td>
<td>Bahamian Dollar</td>
</tr>
<tr>
<td>BTC</td>
<td>Bitcoin</td>
</tr>
<tr>
<td>BTN</td>
<td>Bhutanese Ngultrum</td>
</tr>
<tr>
<td>BWP</td>
<td>Botswanan Pula</td>
</tr>
<tr>
<td>BYN</td>
<td>Belarusian Ruble</td>
</tr>
<tr>
<td>BZD</td>
<td>Belize Dollar</td>
</tr>
<tr>
<td>CAD</td>
<td>Canadian Dollar</td>
</tr>
<tr>
<td>CDF</td>
<td>Congolese Franc</td>
</tr>
<tr>
<td>CHF</td>
<td>Swiss Franc</td>
</tr>
<tr>
<td>CLF</td>
<td>Chilean Unit of Account (UF)</td>
</tr>
<tr>
<td>CLP</td>
<td>Chilean Peso</td>
</tr>
<tr>
<td>CNH</td>
<td>Chinese Yuan (Offshore)</td>
</tr>
<tr>
<td>CNY</td>
<td>RMB</td>
</tr>
<tr>
<td>COP</td>
<td>Colombian Peso</td>
</tr>
<tr>
<td>CRC</td>
<td>Costa Rican Colón</td>
</tr>
<tr>
<td>CUC</td>
<td>Cuban Convertible Peso</td>
</tr>
<tr>
<td>CUP</td>
<td>Cuban Peso</td>
</tr>
<tr>
<td>CVE</td>
<td>Cape Verdean Escudo</td>
</tr>
<tr>
<td>CZK</td>
<td>Czech Republic Koruna</td>
</tr>
<tr>
<td>DJF</td>
<td>Djiboutian Franc</td>
</tr>
<tr>
<td>DKK</td>
<td>Danish Krone</td>
</tr>
<tr>
<td>DOP</td>
<td>Dominican Peso</td>
</tr>
<tr>
<td>DZD</td>
<td>Algerian Dinar</td>
</tr>
<tr>
<td>EGP</td>
<td>Egyptian Pound</td>
</tr>
<tr>
<td>ERN</td>
<td>Eritrean Nakfa</td>
</tr>
<tr>
<td>ETB</td>
<td>Ethiopian Birr</td>
</tr>
<tr>
<td>EUR</td>
<td>Euro</td>
</tr>
<tr>
<td>FJD</td>
<td>Fijian Dollar</td>
</tr>
<tr>
<td>FKP</td>
<td>Falkland Islands Pound</td>
</tr>
<tr>
<td>GBP</td>
<td>British Pound Sterling</td>
</tr>
<tr>
<td>GEL</td>
<td>Georgian Lari</td>
</tr>
<tr>
<td>GGP</td>
<td>Guernsey Pound</td>
</tr>
<tr>
<td>GHS</td>
<td>Ghanaian Cedi</td>
</tr>
<tr>
<td>GIP</td>
<td>Gibraltar Pound</td>
</tr>
<tr>
<td>GMD</td>
<td>Gambian Dalasi</td>
</tr>
<tr>
<td>GNF</td>
<td>Guinean Franc</td>
</tr>
<tr>
<td>GTQ</td>
<td>Guatemalan Quetzal</td>
</tr>
<tr>
<td>GYD</td>
<td>Guyanaese Dollar</td>
</tr>
<tr>
<td>HKD</td>
<td>Hong Kong Dollar</td>
</tr>
<tr>
<td>HNL</td>
<td>Honduran Lempira</td>
</tr>
<tr>
<td>HRK</td>
<td>Croatian Kuna</td>
</tr>
<tr>
<td>HTG</td>
<td>Haitian Gourde</td>
</tr>
<tr>
<td>HUF</td>
<td>Hungarian Forint</td>
</tr>
<tr>
<td>IDR</td>
<td>Indonesian Rupiah</td>
</tr>
<tr>
<td>ILS</td>
<td>Israeli New Sheqel</td>
</tr>
<tr>
<td>IMP</td>
<td>Manx pound</td>
</tr>
<tr>
<td>INR</td>
<td>Indian Rupee</td>
</tr>
<tr>
<td>IQD</td>
<td>Iraqi Dinar</td>
</tr>
<tr>
<td>IRR</td>
<td>Iranian Rial</td>
</tr>
<tr>
<td>ISK</td>
<td>Icelandic Króna</td>
</tr>
<tr>
<td>JEP</td>
<td>Jersey Pound</td>
</tr>
<tr>
<td>JMD</td>
<td>Jamaican Dollar</td>
</tr>
<tr>
<td>JOD</td>
<td>Jordanian Dinar</td>
</tr>
<tr>
<td>JPY</td>
<td>Japanese yen</td>
</tr>
<tr>
<td>KES</td>
<td>Kenyan Shilling</td>
</tr>
<tr>
<td>KGS</td>
<td>Kyrgystani Som</td>
</tr>
<tr>
<td>KHR</td>
<td>Cambodian Riel</td>
</tr>
<tr>
<td>KMF</td>
<td>Comorian Franc</td>
</tr>
<tr>
<td>KPW</td>
<td>North Korean Won</td>
</tr>
<tr>
<td>KRW</td>
<td>South Korean Won</td>
</tr>
<tr>
<td>KWD</td>
<td>Kuwaiti Dinar</td>
</tr>
<tr>
<td>KYD</td>
<td>Cayman Islands Dollar</td>
</tr>
<tr>
<td>KZT</td>
<td>Kazakhstani Tenge</td>
</tr>
<tr>
<td>LAK</td>
<td>Laotian Kip</td>
</tr>
<tr>
<td>LBP</td>
<td>Lebanese Pound</td>
</tr>
<tr>
<td>LKR</td>
<td>Sri Lankan Rupee</td>
</tr>
<tr>
<td>LRD</td>
<td>Liberian Dollar</td>
</tr>
<tr>
<td>LSL</td>
<td>Lesotho Loti</td>
</tr>
<tr>
<td>LYD</td>
<td>Libyan Dinar</td>
</tr>
<tr>
<td>MAD</td>
<td>Moroccan Dirham</td>
</tr>
<tr>
<td>MDL</td>
<td>Moldovan Leu</td>
</tr>
<tr>
<td>MGA</td>
<td>Malagasy Ariary</td>
</tr>
<tr>
<td>MKD</td>
<td>Macedonian Denar</td>
</tr>
<tr>
<td>MMK</td>
<td>Myanma Kyat</td>
</tr>
<tr>
<td>MNT</td>
<td>Mongolian Tugrik</td>
</tr>
<tr>
<td>MOP</td>
<td>Macanese Pataca</td>
</tr>
<tr>
<td>MRO</td>
<td>Mauritanian Ouguiya (pre-2018)</td>
</tr>
<tr>
<td>MRU</td>
<td>Mauritanian Ouguiya</td>
</tr>
<tr>
<td>MUR</td>
<td>Mauritian Rupee</td>
</tr>
<tr>
<td>MVR</td>
<td>Maldivian Rufiyaa</td>
</tr>
<tr>
<td>MWK</td>
<td>Malawian Kwacha</td>
</tr>
<tr>
<td>MXN</td>
<td>Mexican Peso</td>
</tr>
<tr>
<td>MYR</td>
<td>Malaysian Ringgit</td>
</tr>
<tr>
<td>MZN</td>
<td>Mozambican Metical</td>
</tr>
<tr>
<td>NAD</td>
<td>Namibian Dollar</td>
</tr>
<tr>
<td>NGN</td>
<td>Nigerian Naira</td>
</tr>
<tr>
<td>NIO</td>
<td>Nicaraguan Córdoba</td>
</tr>
<tr>
<td>NOK</td>
<td>Norwegian Krone</td>
</tr>
<tr>
<td>NPR</td>
<td>Nepalese Rupee</td>
</tr>
<tr>
<td>NZD</td>
<td>New Zealand Dollar</td>
</tr>
<tr>
<td>OMR</td>
<td>Omani Rial</td>
</tr>
<tr>
<td>PAB</td>
<td>Panamanian Balboa</td>
</tr>
<tr>
<td>PEN</td>
<td>Peruvian Nuevo Sol</td>
</tr>
<tr>
<td>PGK</td>
<td>Papua New Guinean Kina</td>
</tr>
<tr>
<td>PHP</td>
<td>Philippine Piso</td>
</tr>
<tr>
<td>PKR</td>
<td>Pakistani Rupee</td>
</tr>
<tr>
<td>PLN</td>
<td>Polish Zloty</td>
</tr>
<tr>
<td>PYG</td>
<td>Paraguayan Guarani</td>
</tr>
<tr>
<td>QAR</td>
<td>Qatari Rial</td>
</tr>
<tr>
<td>RON</td>
<td>Romanian Leu</td>
</tr>
<tr>
<td>RSD</td>
<td>Serbian Dinar</td>
</tr>
<tr>
<td>RUB</td>
<td>Russian Ruble</td>
</tr>
<tr>
<td>RWF</td>
<td>Rwandan Franc</td>
</tr>
<tr>
<td>SAR</td>
<td>Saudi Riyal</td>
</tr>
<tr>
<td>SBD</td>
<td>Solomon Islands Dollar</td>
</tr>
<tr>
<td>SCR</td>
<td>Seychellois Rupee</td>
</tr>
<tr>
<td>SDG</td>
<td>Sudanese Pound</td>
</tr>
<tr>
<td>SEK</td>
<td>Swedish Krona</td>
</tr>
<tr>
<td>SGD</td>
<td>Singapore Dollar</td>
</tr>
<tr>
<td>SHP</td>
<td>Saint Helena Pound</td>
</tr>
<tr>
<td>SLL</td>
<td>Sierra Leonean Leone</td>
</tr>
<tr>
<td>SOS</td>
<td>Somali Shilling</td>
</tr>
<tr>
<td>SRD</td>
<td>Surinamese Dollar</td>
</tr>
<tr>
<td>SSP</td>
<td>South Sudanese Pound</td>
</tr>
<tr>
<td>STD</td>
<td>São Tomé and Príncipe Dobra (pre-2018)</td>
</tr>
<tr>
<td>STN</td>
<td>São Tomé and Príncipe Dobra</td>
</tr>
<tr>
<td>SVC</td>
<td>Salvadoran Colón</td>
</tr>
<tr>
<td>SYP</td>
<td>Syrian Pound</td>
</tr>
<tr>
<td>SZL</td>
<td>Swazi Lilangeni</td>
</tr>
<tr>
<td>THB</td>
<td>Thai Baht</td>
</tr>
<tr>
<td>TJS</td>
<td>Tajikistani Somoni</td>
</tr>
<tr>
<td>TMT</td>
<td>Turkmenistani Manat</td>
</tr>
<tr>
<td>TND</td>
<td>Tunisian Dinar</td>
</tr>
<tr>
<td>TOP</td>
<td>Tongan Pa&#39;anga</td>
</tr>
<tr>
<td>TRY</td>
<td>Turkish Lira</td>
</tr>
<tr>
<td>TTD</td>
<td>Trinidad and Tobago Dollar</td>
</tr>
<tr>
<td>TWD</td>
<td>New Taiwan Dollar</td>
</tr>
<tr>
<td>TZS</td>
<td>Tanzanian Shilling</td>
</tr>
<tr>
<td>UAH</td>
<td>Ukrainian Hryvnia</td>
</tr>
<tr>
<td>UGX</td>
<td>Ugandan Shilling</td>
</tr>
<tr>
<td>USD</td>
<td>United States dollar</td>
</tr>
<tr>
<td>UYU</td>
<td>Uruguayan Peso</td>
</tr>
<tr>
<td>UZS</td>
<td>Uzbekistan Som</td>
</tr>
<tr>
<td>VEF</td>
<td>Venezuelan Bolívar Fuerte (Old)</td>
</tr>
<tr>
<td>VES</td>
<td>Venezuelan Bolívar Soberano</td>
</tr>
<tr>
<td>VND</td>
<td>Vietnamese Dong</td>
</tr>
<tr>
<td>VUV</td>
<td>Vanuatu Vatu</td>
</tr>
<tr>
<td>WST</td>
<td>Samoan Tala</td>
</tr>
<tr>
<td>XAF</td>
<td>CFA Franc BEAC</td>
</tr>
<tr>
<td>XAG</td>
<td>Silver Ounce</td>
</tr>
<tr>
<td>XAU</td>
<td>Gold Ounce</td>
</tr>
<tr>
<td>XCD</td>
<td>East Caribbean Dollar</td>
</tr>
<tr>
<td>XDR</td>
<td>Special Drawing Rights</td>
</tr>
<tr>
<td>XOF</td>
<td>CFA Franc BCEAO</td>
</tr>
<tr>
<td>XPD</td>
<td>Palladium Ounce</td>
</tr>
<tr>
<td>XPF</td>
<td>CFP Franc</td>
</tr>
<tr>
<td>XPT</td>
<td>Platinum Ounce</td>
</tr>
<tr>
<td>YER</td>
<td>Yemeni Rial</td>
</tr>
<tr>
<td>ZAR</td>
<td>South African Rand</td>
</tr>
<tr>
<td>ZMW</td>
<td>Zambian Kwacha</td>
</tr>
<tr>
<td>ZWL</td>
<td>Zimbabwean Dollar</td>
</tr>
</tbody></table>
<h2 id='crypto-currencies'>加密货币</h2>
<table><thead>
<tr>
<th>Code</th>
<th>Currency</th>
<th>Payment Method/Network</th>
</tr>
</thead><tbody>
<tr>
<td>BTC</td>
<td>Bitcoin</td>
<td>bitcoin</td>
</tr>
<tr>
<td>ETH</td>
<td>Ethereum</td>
<td>ethereum</td>
</tr>
<tr>
<td>USDT</td>
<td>Tether-ERC20</td>
<td>tether</td>
</tr>
</tbody></table>
<h1 id='errors'>异常错误</h1>
<p>MimosPay API接口使用以下HTTP中定义的错误代码，</p>

<table><thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The requested has been removed from our servers.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway -- We had a problem with our gateway server and got an invalid response from another upstream server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="javascript--node">NodeJS</a>
                <a href="#" data-language-name="go">Go</a>
                <a href="#" data-language-name="python">Python</a>
          </div>
      </div>
    </div>
  </body>
</html>
